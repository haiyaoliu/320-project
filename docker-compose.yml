version: '3'
services:
    server:
        build: server/
        command: yarn start
        volumes: 
            - ./server:/usr/app
            - /usr/app/node_modules
        ports:
            - "5000:5000"
    client:
        build: .
        command: yarn start-client
        volumes:
            - .:/usr/app/
            - /usr/app/node_modules
        network_mode: host
        depends_on: 
            - server
        # ports:
        #     - "3000:3000"
            # - "5000:5000"
